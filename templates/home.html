{% extends 'base.html' %}

{% block title %}Autêntica | Home{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
<style>
    /* Grid layout for feature buttons */
    .buttons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }
    
    /* Base button style */
    .feature-button {
        border-radius: 12px;
        background-color: #ffffff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: all 0.3s ease;
        height: 200px;
        position: relative;
        cursor: pointer;
        text-decoration: none;
        color: #fff;
    }
    
    /* Full-width image style */
    .feature-button img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    
    /* Text overlay */
    .button-content {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 1rem;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
    }
    
    .button-name {
        font-weight: 500;
        font-size: 1rem;
        line-height: 1.2;
        color: #fff;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
    }
    
    /* Unlocked button hover effects */
    .feature-button.unlocked:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }
    
    .feature-button.unlocked:hover img {
        transform: scale(1.05);
    }
    
    /* Locked button styles */
    .feature-button.locked {
        opacity: 0.8;
        filter: grayscale(70%);
        cursor: not-allowed;
    }
    
    /* Lock overlay */
    .lock-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
    }
    
    .lock-icon {
        font-size: 3rem;
        color: #fff;
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 50%;
        padding: 0.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .buttons-grid {
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
        }
        
        .feature-button {
            height: 180px;
        }
        
        .button-name {
            font-size: 0.9rem;
        }
        
        .lock-icon {
            font-size: 2.5rem;
        }
    }
    
    @media (max-width: 480px) {
        .buttons-grid {
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        }
        
        .feature-button {
            height: 160px;
        }
        
        .button-name {
            font-size: 0.85rem;
        }
        
        .lock-icon {
            font-size: 2rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="home-container">
    <header class="app-header">
        <div class="logo-container">
            <div class="logo">
                <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="Logo Autêntica">
            </div>
            <h1 class="brand-name">AUTÊNTICA</h1>
        </div>
        
        <div class="user-menu">
            <div class="user-info">
                <span class="user-name">{{ user.nome }}</span>
                <div class="user-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>
            <div class="dropdown-menu">
                <a href="{{ url_for('main.logout') }}" class="menu-item">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </a>
            </div>
        </div>
    </header>
    
    <main class="main-content">
        <div class="welcome-message">
            <h2>Bem-vindo, {{ user.nome }}!</h2>
            <p>Selecione uma das opções disponíveis abaixo:</p>
        </div>
        
        <div>
            <p>Seu acesso expira em: <span id="countdown-timer">Carregando...</span></p>
        </div>
        
        <!-- Buttons Grid Layout -->
        <div class="buttons-grid">
            <!-- Locked Capivara Editorial Button -->
            <div class="feature-button locked" id="capivara-editorial">
                <img src="{{ url_for('static', filename='img/icons/capivara-editorial.jpeg') }}" alt="Capivara Editorial">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">Capivara Editorial</span>
                </div>
            </div>
            
            <a href="{{ url_for('main.skill_a') }}" class="feature-button unlocked" id="skill-a">
                <img src="{{ url_for('static', filename='img/icons/skill-a.jpeg') }}" alt="Skill A">
                <div class="button-content">
                    <span class="button-name">Skill A habilidade de Ler instagram da Capivara</span>
                </div>
            </a>
            
            <!-- Locked Buttons -->
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/capivara-tracao.jpeg') }}" alt="Capivara Tração">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">Capivara Tração</span>
                </div>
            </div>
            
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/capivara-brechas.jpeg') }}" alt="Capivara das Brechas">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">Capivara das Brechas</span>
                </div>
            </div>
            
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/capivara-conteudo.jpeg') }}" alt="Capivara do Conteúdo">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">Capivara do Conteúdo</span>
                </div>
            </div>
            
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/capivara-corretora.jpeg') }}" alt="Capivara Corretora Ortográfica">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">Capivara Corretora Ortográfica</span>
                </div>
            </div>
            
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/cfo.jpeg') }}" alt="CFO">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">CFO</span>
                </div>
            </div>
            
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/willian-ai.jpeg') }}" alt="Willian AI">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">Willian AI</span>
                </div>
            </div>
            
            <div class="feature-button locked">
                <img src="{{ url_for('static', filename='img/icons/ipm.jpeg') }}" alt="IPM">
                <div class="lock-overlay">
                    <i class="fas fa-lock lock-icon"></i>
                </div>
                <div class="button-content">
                    <span class="button-name">IPM</span>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="app-footer">
        <p>&copy; 2025 Autêntica by Órizen. Todos os direitos reservados.</p>
    </footer>
</div>
{% endblock %}

{% block custom_js %}
<script>
        document.addEventListener('DOMContentLoaded', function() {
        // Removed click event for capivara-editorial button to block it
        
        // Add a click event for locked buttons to show a message
        document.querySelectorAll('.feature-button.locked').forEach(function(button) {
            button.addEventListener('click', function() {
                alert('Esta funcionalidade ainda não está disponível para o seu perfil.');
            });
        });
        
        // Countdown timer script
        const countdownElement = document.getElementById('countdown-timer');
        const countdownDuration = 96 * 60 * 60 * 1000; // 96 hours (4 days) in milliseconds
        let countdownStart = new Date().getTime();

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDuration - (now - countdownStart);

            if (distance < 0) {
                countdownElement.innerHTML = "Seu acesso expirou.";
                clearInterval(interval);
                return;
            }

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            countdownElement.innerHTML = hours + "h "
                + minutes + "m " + seconds + "s ";
        }

        updateCountdown();
        const interval = setInterval(updateCountdown, 1000);
    });
</script>
{% endblock %}